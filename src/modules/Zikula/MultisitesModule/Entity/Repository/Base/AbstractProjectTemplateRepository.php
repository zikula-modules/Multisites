<?php
/**
 * Multisites.
 *
 * @copyright Albert P?rez Monfort (Zikula)
 * @license http://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License
 * @author Albert P?rez Monfort <aperezm@xtec.cat>.
 * @link http://modulestudio.de
 * @link http://zikula.org
 * @version Generated by ModuleStudio 0.7.0 (http://modulestudio.de).
 */

namespace Zikula\MultisitesModule\Entity\Repository\Base;

use Doctrine\ORM\EntityRepository;
use Psr\Log\LoggerInterface;

/**
 * Repository class used to implement own convenience methods for performing certain DQL queries.
 *
 * This is the base repository class for the many to many relationship
 * between project and template entities.
 */
class AbstractProjectTemplateRepository extends EntityRepository
{
    /**
     * Deletes all items in this table.
     *
     * @param LoggerInterface $logger Logger service instance
     */
    public function truncateTable(LoggerInterface $logger)
    {
        $qb = $this->getEntityManager()->createQueryBuilder();
        $qb->delete('\\Zikula\\MultisitesModule\\Entity\\ProjectTemplate', 'tbl');
        $query = $qb->getQuery();
        $query->execute();

        $logArgs = ['app' => 'ZikulaMultisitesModule', 'entity' => 'project template'];
        $logger->debug('{app}: Truncated the {entity} entity table.', $logArgs);
    }
}
