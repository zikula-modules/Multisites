<?php

/**
 * Multisites.
 *
 * @copyright Albert PÃ©rez Monfort (Zikula)
 * @license http://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License
 * @author Albert PÃ©rez Monfort <aperezm@xtec.cat>.
 * @see https://modulestudio.de
 * @see https://ziku.la
 * @version Generated by ModuleStudio 1.5.0 (https://modulestudio.de).
 */

namespace Zikula\MultisitesModule\Helper;

use Zikula\MultisitesModule\Helper\Base\AbstractControllerHelper;

/**
 * Helper implementation class for controller layer methods.
 */
class ControllerHelper extends AbstractControllerHelper
{
    /**
     * @var array
     */
    private $multisitesParameters;

    /**
     * Sets the multisites parameters.
     *
     * @param array $multisitesParameters
     */
    public function setMultisitesParameters(array $multisitesParameters = [])
    {
        $this->multisitesParameters = $multisitesParameters;
    }

    public function addTemplateParameters($objectType = '', array $parameters = [], $context = '', array $args = [])
    {
        if (!in_array($context, ['controllerAction', 'api', 'actionHandler', 'block', 'contentType', 'mailz'])) {
            $context = 'controllerAction';
        }

        $parameters = parent::addTemplateParameters($objectType, $parameters, $context, $args);

        if (
            'site' === $objectType
            && 'controllerAction' === $context
            && isset($args['action'])
            && 'view' === $args['action']
        ) {
            $parameters['basedOnDomains'] = $this->multisitesParameters['based_on_domains'];
        }

        return $parameters;
    }
}
